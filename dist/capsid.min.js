var capsid=function(n){"use strict";var i={};function a(n,t){if(!n)throw new Error(t)}function r(n){a("string"==typeof n,"The name should be a string"),a(!!i[n],"The coelement of the given name is not registered: "+n)}var e="readystatechange",o=document,t=new Promise(function(t){var n=function n(){"complete"===o.readyState&&(t(),o.removeEventListener(e,n))};o.addEventListener(e,n),n()}),c=o.documentElement,u=function(n,t){var e=void 0;n?(r(n),e=[n]):e=Object.keys(i),e.map(function(n){[].map.call((t||o).querySelectorAll(i[n].sel),i[n])})},l=[],s="C$",f="K$",m=function(n,t,e){var o,r;n.I$||(r=e,(o=n).I$=!0,o.N$=r,o.capsid=N,"function"==typeof o.__init__&&o.__init__());var c=new n;return c.el=t,e&&(t[s+e]=c),(n.K$||[]).map(function(n){n(t,c,e)}),l.forEach(function(n){n(t,c)}),"function"==typeof c.__init__&&c.__init__(),"function"==typeof c.__mount__&&c.__mount__(),c},v=function(o,r){a("string"==typeof o,"`name` of a class component has to be a string."),a("function"==typeof r,"`Constructor` of a class component has to be a function");var c=o+"-ðŸ’Š",n=function(n,t){var e=n.classList;e.contains(c)||(e.add(o,c),m(r,n,o))};n.sel="."+o+":not(."+c+")",i[o]=n,t.then(function(){u(o)})},h=function(n,t){r(n);var e=t[s+n];return a(e,"no coelement named: "+n+", on the dom: "+t.tagName),e},p=function(n,t){var e,o;return o=t,r(e=n),i[e](o),h(n,t)},_=function(n,t){var e=h(n,t);"function"==typeof e.__unmount__&&e.__unmount__(),t.classList.remove(n,n+"-ðŸ’Š"),(t[f+n]||[]).forEach(function(n){n.remove()}),delete t[s+n],delete e.el},d=function(n,t){a("function"==typeof n.install,"The given capsid module does not have `install` method. Please check the install call."),n.install(N,t||{})},y=function(i){var u=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).at;return function(n,c){var t=n.constructor;a(!!i,"Empty event handler is given: constructor="+t.name+" key="+c),t.K$=(t.K$||[]).concat(function(n,e,t){var o=f+t,r=function(t){u&&![].some.call(n.querySelectorAll(u),function(n){return n===t.target||n.contains(t.target)})||e[c](t)};r.remove=function(){n.removeEventListener(i,r)},n[o]=(n[o]||[]).concat(r),n.addEventListener(i,r)})}},g=function(n,t,e,o){n.dispatchEvent(new CustomEvent(t,{detail:o,bubbles:e}))},b=function(r){return function(n,t,e){var o=e.value;a(!!r,"Unable to emits an empty event: constructor="+(n.constructor&&n.constructor.name||"?")+" key="+t),e.value=function(){var t=this,n=o.apply(this,arguments),e=function(n){return g(t.el,r,!0,n)};return n&&n.then?n.then(e):e(n),n}}};b.first=function(r){return function(n,t,e){var o=e.value;e.value=function(){return g(this.el,r,!0,arguments[0]),o.apply(this,arguments)}}};var w=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,E=function(n){return n.replace(/(?!^)[A-Z]/g,"-$&").toLowerCase()},k=function(r,c){return function(n,t,e){var o=c||"."+r;e.get=function(){if(a(!!this.el,"Component's element is not ready. Probably wired getter called at constructor.(class=["+this.constructor.name+"]"),w.call(this.el,o))return h(r,this.el);var n=this.el.querySelectorAll(o);return a(0<n.length,'wired component "'+r+'" is not available at '+this.el.tagName+"(class=["+this.constructor.name+"]"),h(r,n[0])}}},S=function(n,t,e){if("string"==typeof n)return k(n,t);k(E(t))(n,t,e)},$=function(o){return function(n,t,e){e.get=function(){return this.el.querySelector(o)}}},A=function(o){return function(n,t,e){e.get=function(){return this.el.querySelectorAll(o)}}};S.el=$,S.elAll=A;var L=$;L.all=A,L.component=S;var q=function n(t){return"function"!=typeof t?function(n){return v(t,n),n}:n(E(t.name))(t)},C=function(c,i){return function(n,t,e){var r=e.value;a(!!c,"Unable to notify empty event: constructor="+(n.constructor&&n.constructor.name||"?")+" key="+t),e.value=function(){var n=this,t=r.apply(this,arguments),e=[].forEach,o=function(t){e.call(n.el.querySelectorAll(i),function(n){return g(n,c,!1,t)})};return t&&t.then?t.then(o):o(t),t}}};y.useHandler=function(t){(y[t]=y(t)).at=function(n){return y(t,{at:n})}},y.useHandler("click");var H=b,K=C,N=Object.freeze({def:v,prep:u,make:p,mount:m,unmount:_,get:h,install:d,on:y,emit:H,emits:b,wire:S,wired:L,component:q,pub:K,notifies:C,__ccc__:i,pluginHooks:l});return n.def=v,n.prep=u,n.make=p,n.mount=m,n.unmount=_,n.get=h,n.install=d,n.on=y,n.emit=H,n.emits=b,n.wire=S,n.wired=L,n.component=q,n.pub=K,n.notifies=C,n.__ccc__=i,n.pluginHooks=l,n}({});