var capsid=function(n){"use strict";var e={};function t(n,e){if(!n)throw new Error(e)}function o(n){t("string"==typeof n,"The name should be a string"),t(!!e[n],"The coelement of the given name is not registered: "+n)}var r=document,i=new Promise(function(n){var e=function(){"complete"===r.readyState&&(n(),r.removeEventListener("readystatechange",e))};r.addEventListener("readystatechange",e),e()}),c=r.documentElement,a=function(n,t){var i;n?(o(n),i=[n]):i=Object.keys(e),i.map(function(n){[].map.call((t||r).querySelectorAll(e[n].sel),e[n])})},u=[],s=function(n,e,t){n.I$||function(n,e){n.I$=!0,n.N$=e,n.capsid=E,"function"==typeof n.__init__&&n.__init__()}(n,t);var o=new n;return o.el=e,t&&(e["C$"+t]=o),(n.K$||[]).map(function(n){n(e,o,t)}),u.forEach(function(n){n(e,o)}),"function"==typeof o.__mount__&&o.__mount__(),o},l=function(n,o){t("string"==typeof n,"`name` of a class component has to be a string."),t("function"==typeof o,"`Constructor` of a class component has to be a function");var r=n+"-ðŸ’Š",c=function(e,t){var i=e.classList;i.contains(r)||(i.add(n,r),s(o,e,n))};c.sel="."+n+":not(."+r+")",e[n]=c,i.then(function(){a(n)})},f=function(n,e){o(n);var r=e["C$"+n];return t(r,"no coelement named: "+n+", on the dom: "+e.tagName),r},m=function(n,t){return function(n,t){o(n),e[n](t)}(n,t),f(n,t)},p=function(n,e){var t=f(n,e);"function"==typeof t.__unmount__&&t.__unmount__(),e.classList.remove(n,n+"-ðŸ’Š"),(e["K$"+n]||[]).forEach(function(n){n.remove()}),delete e["C$"+n],delete t.el},h=function(n,e){t("function"==typeof n.install,"The given capsid module does not have `install` method. Please check the install call."),n.install(E,e||{})},v=function(n,e){var o=(void 0===e?{}:e).at;return function(e){var r=e.key;e.finisher=function(e){t(!!n,"Empty event handler is given: constructor="+e.name+" key="+r),e.K$=(e.K$||[]).concat(function(e,t,i){var c="K$"+i,a=function(n){o&&![].some.call(e.querySelectorAll(o),function(e){return e===n.target||e.contains(n.target)})||t[r](n)};a.remove=function(){e.removeEventListener(n,a)},e[c]=(e[c]||[]).concat(a),e.addEventListener(n,a)})}}},y=function(n,e,t,o){n.dispatchEvent(new CustomEvent(e,{detail:o,bubbles:t}))},d=function(n){return function(e,o){var r=e.descriptor.value,i=e.key;e.finisher=function(e){t(!!n,"Unable to emits an empty event: constructor="+e.name+" key="+i)},e.descriptor.value=function(){var e=this,t=r.apply(this,arguments),o=function(t){return y(e.el,n,!0,t)};return t&&t.then?t.then(o):o(t),t}}},_=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,g=function(n){return function(e,t){var o=e.key;e.placement="prototype",e.finisher=function(e){Object.defineProperty(e.prototype,o,{get:function(){return this.el.querySelector(n)}})}}};g.all=function(n){return function(e,t){var o=e.key;e.placement="prototype",e.finisher=function(e){Object.defineProperty(e.prototype,o,{get:function(){return this.el.querySelectorAll(n)}})}}},g.component=function(n,e){return function(o,r){var i=e||"."+n,c=o.key;o.placement="prototype",o.finisher=function(e){Object.defineProperty(e.prototype,c,{get:function(){if(t(!!this.el,"Component's element is not ready. Probably wired getter called at constructor.(class=["+this.constructor.name+"]"),_.call(this.el,i))return f(n,this.el);var e=this.el.querySelectorAll(i);return t(e.length>0,'wired component "'+n+'" is not available at '+this.el.tagName+"(class=["+this.constructor.name+"]"),f(n,e[0])}})}}};var b=function(n){return t("string"==typeof n&&!!n,"Component name must be a non-empty string"),function(e){e.finisher=function(e){l(n,e)}}},k=function(n,e){return function(o,r){var i=o.key,c=o.descriptor,a=c.value;o.finisher=function(o){t(!!n,"Unable to notify empty event: constructor="+o.name+" key="+i),t(!!e,"Error: Empty selector for @notifies: constructor="+o.name+" key="+i+" event="+n)},c.value=function(){var t=this,o=a.apply(this,arguments),r=[].forEach,i=function(o){r.call(t.el.querySelectorAll(e),function(e){return y(e,n,!1,o)})};return o&&o.then?o.then(i):i(o),o}}};v.useHandler=function(n){(v[n]=v(n)).at=function(e){return v(n,{at:e})}},v.useHandler("click");var E=Object.freeze({def:l,prep:a,make:m,mount:s,unmount:p,get:f,install:h,on:v,emits:d,wired:g,component:b,notifies:k,__ccc__:e,pluginHooks:u});return n.def=l,n.prep=a,n.make=m,n.mount=s,n.unmount=p,n.get=f,n.install=h,n.on=v,n.emits=d,n.wired=g,n.component=b,n.notifies=k,n.__ccc__=e,n.pluginHooks=u,n}({});